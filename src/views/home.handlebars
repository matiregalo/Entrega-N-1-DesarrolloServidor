<div class="filter-container" style="margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 8px;">
  <label for="categoryFilter" style="margin-right: 10px; font-weight: bold;">Filtrar por categoría:</label>
  <select id="categoryFilter" name="category" style="padding: 8px 12px; border-radius: 4px; border: 1px solid #ddd; font-size: 16px;">
    <option value="all" {{#if (eq selectedCategory "all")}}selected{{/if}}>Todas las categorías</option>
    {{#each categories}}
      <option value="{{this}}" {{#if (eq ../selectedCategory this)}}selected{{/if}}>{{this}}</option>
    {{/each}}
  </select>
</div>

<div class="product-grid">
  {{#each products}}
    <div class="item" data-id="{{this.id}}">
      <div class="img-item-container">
        <img class="img-item" src="{{this.thumbnails}}" alt="{{this.title}}" />
      </div>
      <div class="text-item">
        <h2 class="title-item">{{this.title}}</h2>
        <p class="product-description">{{this.description}}</p>
        <div class="product-details">
          <p class="product-code">Código: {{this.code}}</p>
          <p class="product-status">Estado:
            {{#if this.status}}Activo{{else}}Inactivo{{/if}}</p>
          <p class="product-stock">Stock: {{this.stock}}</p>
          <p class="product-category">Categoría: {{this.category}}</p>
        </div>
        <p class="product-price">Precio: ${{this.price}}</p>
        <button
          class="button-item delete-btn"
          data-id="{{this.id}}"
        >Eliminar</button>
      </div>
    </div>
  {{/each}}
</div>

<div>
  {{#each links}}
    <a href="{{this.link}}">{{this.text}}</a>
  {{/each}}
</div>

<script>
  document.getElementById("categoryFilter").addEventListener("change", function() {
    const category = this.value;
    const url = new URL(window.location.href);
    
    if (category === "all") {
      url.searchParams.delete("category");
    } else {
      url.searchParams.set("category", category);
    }
    
    // Resetear a página 1 cuando cambia la categoría
    url.searchParams.set("page", "1");
    
    window.location.href = url.toString();
  });
</script>